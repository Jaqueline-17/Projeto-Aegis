/* PROJETO_AEGIS_LOGICO: */

CREATE TABLE EMPREENDEDOR (
    ID_EMP INTEGER PRIMARY KEY,
    NOME VARCHAR,
    NOME_FANTASIA VARCHAR,
    CPF_CNPJ CHAR(14),
    EMAIL VARCHAR,
    SENHA VARCHAR
);

CREATE TABLE CLIENTE (
    ID_CLIENTE INTEGER PRIMARY KEY,
    NOME VARCHAR,
    CPF_CNPJ CHAR(14),
    TELEFONE VARCHAR
);

CREATE TABLE VENDAS (
    ID_VENDA INTEGER PRIMARY KEY,
    DATA_HORA TIMESTAMP,
    FORMA_PAGAMENTO VARCHAR,
    VALOR_TOTAL REAL,
    ID_CLIENTE INTEGER
);

CREATE TABLE ESTOQUE (
    ID_PRODUTO INTEGER PRIMARY KEY,
    NOME_PRODUTO VARCHAR,
    VALOR_UNITARIO REAL,
    QUANTIDADE INTEGER,
    ID_FORNECEDOR INTEGER,
    EMP_RESPONSAVEL INTEGER
);

CREATE TABLE FORNECEDOR (
    ID_FORNECEDOR INTEGER PRIMARY KEY,
    NOME_FORNEC VARCHAR
);

CREATE TABLE PRODUTOS_FORNECIDOS (
      ID_VENDA INTEGER,
	  ID_PRODUTO INTEGER
);
 
ALTER TABLE VENDAS ADD CONSTRAINT FK_VENDAS FOREIGN KEY(ID_CLIENTE) REFERENCES CLIENTE (ID_CLIENTE);
ALTER TABLE VENDAS ADD CONSTRAINT FK_EMP_VENDEDOR FOREIGN KEY(ID_EMP) REFERENCES EMPREENDEDOR(ID_EMP);
ALTER TABLE ESTOQUE ADD CONSTRAINT FK_FORNEC FOREIGN KEY(ID_FORNECEDOR) REFERENCES FORNECEDOR (ID_FORNECEDOR);
ALTER TABLE ESTOQUE ADD CONSTRAINT FK_EMP_RESP FOREIGN KEY(EMP_RESPONSAVEL) REFERENCES EMPREENDEDOR(ID_EMP);
ALTER TABLE PRODUTOS_FORNECIDOS ADD CONSTRAINT FK_VENDA_FORNEC FOREIGN KEY(ID_VENDA) REFERENCES VENDAS(ID_VENDA);
ALTER TABLE PRODUTOS_FORNECIDOS ADD CONSTRAINT FK_PRODUTO_FORNEC FOREIGN KEY(ID_PRODUTO) REFERENCES ESTOQUE(ID_PRODUTO);


-- TESTE DE INSERÇÃO DE VALORES

INSERT INTO EMPREENDEDOR VALUES (53, 'ALBERTO SILVA', 'ARMARINHO DO ALBERTO', '123456789', 'ALBERTO@GMAIL.COM', 'TESPASS');
INSERT INTO EMPREENDEDOR VALUES (80, 'MARIA SANTOS', 'BAR DA MARIA', '1234567891234', 'MARIA@OUTLOOK.COM', 'TESTE@PASSWORD');

INSERT INTO CLIENTE VALUES (95, 'CARLOS SANTOS', '1234567891234', '91 86274121');

INSERT INTO FORNECEDOR VALUES (101, 'LOTUS DISTRIBUIDORA');
INSERT INTO FORNECEDOR VALUES (140, 'AZUL DOCES');
INSERT INTO ESTOQUE VALUES (219, 'SOL REFRI', 5.20, 12, 101, 80);
INSERT INTO ESTOQUE VALUES (340, 'AM COCADA', 2.50, 30, 140, 80);
INSERT INTO ESTOQUE VALUES (220, 'CERVEJA GLACIAL', 6.00, 80, 101, 80);
INSERT INTO ESTOQUE VALUES (205, 'PEPSI 2L', 4.50, 45, 101, 53);

INSERT INTO VENDA VALUES ();

INSERT INTO VENDAS (ID_VENDA, FORMA_PAGAMENTO, VALOR_TOTAL, ID_CLIENTE, ID_EMP) VALUES(17, 'DINHEIRO', 11.2, 95, 80);
INSERT INTO PRODUTOS_FORNECIDOS VALUES (17, 219);
INSERT INTO PRODUTOS_FORNECIDOS VALUES (17, 340);


-- Informando que o TIMESTAMP da tabela VENDAS foi alterado pelas configurações 
-- de tabela para que receba data e horário que a compra foi realizada


SELECT * FROM EMPREENDEDOR;
SELECT * FROM VENDAS;
SELECT * FROM ESTOQUE;
SELECT * FROM PRODUTOS_FORNECIDOS;
SELECT * FROM CLIENTE;
SELECT * FROM FORNECEDOR;
 
